# Loading in required libraries
import matplotlib.pyplot as plt
import pandas as pd
import seaborn as sns
import numpy as np



df = pd.read_csv("../data/nobel.csv")

#1 What is the most commonly awarded gender and birth country?
#Store your answers as string variables top_gender and top_country.
top_gender= df["sex"].mode()[0]
top_country= df['birth_country'].mode()[0]
print([top_country, top_gender])
print(df.columns)


#2 Which decade had the highest ratio of US-born Nobel Prize winners to total winners in all categories?
df["US_born_winners"]= df["birth_country"]== 'United States of America'
print(df["US_born_winners"])

df["decade"]= (np.floor(df["year"]/10)*10).astype(int) # np.floor se usa para redondear al numero hacia abajo mas cercano
print(df["decade"])

ratio_of_USwinners= df.groupby("decade", as_index=False)["US_born_winners"].mean()
print(ratio_of_USwinners)

max_decade_usa= ratio_of_USwinners[ratio_of_USwinners["US_born_winners"] == ratio_of_USwinners["US_born_winners"].max()]['decade'].values[0]

print(max_decade_usa)

ax1= sns.relplot(x="decade", y="US_born_winners", kind="line", data= df)

plt.show()


#3 Which decade and Nobel Prize category combination had the highest proportion of female laureates?

df["female_winners"]= df["sex"]== 'Female'
print(df["US_born_winners"])



ratio_of_female_winners= df.groupby(["decade", 'category'], as_index=False)["female_winners"].mean()
print(ratio_of_USwinners)

max_female_decade_category = ratio_of_female_winners[ratio_of_female_winners['female_winners'] == ratio_of_female_winners['female_winners'].max()][['decade', 'category']]

max_female_dict= {max_female_decade_category['decade'].values[0]: max_female_decade_category['category'].values[0]}

print(max_female_dict)

ax2= sns.relplot(x='decade', y="female_winners", kind="line", data= df)

plt.show()




# Who was the first woman to receive a Nobel Prize, and in what category?
new_df= df[df["female_winners"]]
min_row = new_df[new_df['year'] == new_df['year'].min()]
first_woman_name=  min_row['full_name'].values[0]
first_woman_category= new_df['category'].values[0]
print(f"\n The first woman to win a Nobel Prize was {first_woman_name}, in the category of {first_woman_category}.")

# Which individuals or organizations have won more than one Nobel Prize throughout the years?


counts= df['full_name'].value_counts()
repeats= counts[counts >= 2].index
repeat_list= list(repeats)
print(repeat_list)
